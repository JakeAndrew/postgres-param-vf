ALTER TABLE "user" DROP COLUMN "read_comments";
ALTER TABLE "user" DROP COLUMN "read_edits";
ALTER TABLE "user" DROP COLUMN "message_preferences";
CREATe TABLE "user_message_pref"("id" SERIAL PRIMARY KEY UNIQUE,"user" INT8 NOT NULL,"type" VARCHAR NOT NULL,"delivery" VARCHAR NOT NULL);
ALTER TABLE "user_message_pref" ADD CONSTRAINT "unique_user_message_pref" UNIQUE("user","type");
ALTER TABLE "user_message_pref" ADD CONSTRAINT "user_message_pref_user_fkey" FOREIGN KEY("user") REFERENCES "user"("id");
CREATe TABLE "view_comment"("id" SERIAL PRIMARY KEY UNIQUE,"user" INT8 NOT NULL,"comment" INT8 NOT NULL);
ALTER TABLE "view_comment" ADD CONSTRAINT "unique_view_comment" UNIQUE("user","comment");
ALTER TABLE "view_comment" ADD CONSTRAINT "view_comment_user_fkey" FOREIGN KEY("user") REFERENCES "user"("id");
ALTER TABLE "view_comment" ADD CONSTRAINT "view_comment_comment_fkey" FOREIGN KEY("comment") REFERENCES "comment"("id");
CREATe TABLE "view_wiki_edit"("id" SERIAL PRIMARY KEY UNIQUE,"user" INT8 NOT NULL,"edit" INT8 NOT NULL);
ALTER TABLE "view_wiki_edit" ADD CONSTRAINT "unique_view_wiki_edit" UNIQUE("user","edit");
ALTER TABLE "view_wiki_edit" ADD CONSTRAINT "view_wiki_edit_user_fkey" FOREIGN KEY("user") REFERENCES "user"("id");
ALTER TABLE "view_wiki_edit" ADD CONSTRAINT "view_wiki_edit_edit_fkey" FOREIGN KEY("edit") REFERENCES "wiki_edit"("id");
CREATe TABLE "user_watching_project"("id" SERIAL PRIMARY KEY UNIQUE,"user" INT8 NOT NULL,"project" INT8 NOT NULL);
ALTER TABLE "user_watching_project" ADD CONSTRAINT "unique_user_watching_project" UNIQUE("user","project");
ALTER TABLE "user_watching_project" ADD CONSTRAINT "user_watching_project_user_fkey" FOREIGN KEY("user") REFERENCES "user"("id");
ALTER TABLE "user_watching_project" ADD CONSTRAINT "user_watching_project_project_fkey" FOREIGN KEY("project") REFERENCES "project"("id");
CREATe TABLE "event_comment_posted"("id" SERIAL PRIMARY KEY UNIQUE,"comment" INT8 NOT NULL,"ts" TIMESTAMP NOT NULL);
ALTER TABLE "event_comment_posted" ADD CONSTRAINT "event_comment_posted_comment_fkey" FOREIGN KEY("comment") REFERENCES "comment"("id");
CREATe TABLE "event_comment_pending"("id" SERIAL PRIMARY KEY UNIQUE,"comment" INT8 NOT NULL,"ts" TIMESTAMP NOT NULL);
ALTER TABLE "event_comment_pending" ADD CONSTRAINT "event_comment_pending_comment_fkey" FOREIGN KEY("comment") REFERENCES "comment"("id");
CREATe TABLE "event_wiki_edit"("id" SERIAL PRIMARY KEY UNIQUE,"wiki_edit" INT8 NOT NULL,"ts" TIMESTAMP NOT NULL);
ALTER TABLE "event_wiki_edit" ADD CONSTRAINT "event_wiki_edit_wiki_edit_fkey" FOREIGN KEY("wiki_edit") REFERENCES "wiki_edit"("id");
